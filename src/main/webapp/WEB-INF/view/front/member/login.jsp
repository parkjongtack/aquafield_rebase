<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%><%@ include file="../../common/taglibs.jsp" %><section id="bx_login">	 <header>	 	<h1><p><img src="/common/front/images/common/logo_loginForm.png" alt="AQUAFIELD" /></p>로그인</h1>	 </header>	 <form id="loginForm" name="loginForm" method="post" onsubmit="return false;">	 <input type="hidden" name="point" value="POINT01">	 	<div class="form_type1">         <ul>             <li>                 <div class="placeh">                    <input type="text" class="ipt bd_hide w260" name="user_id" id="user_id" value="">                    <label for="user_id">이메일 입력</label>                  </div>                 <button type="button" onclick="memberFn.searchId();" tabindex="-1">찾기 ></button>             </li>             <li>             	<div class="placeh">                 	<input type="password" class="ipt bd_hide w260" name="user_pwd" id="user_pwd" value="">                 	<label for="user_pwd">Password</label>                </div>                <button type="button" onclick="memberFn.resetPwdCer();" tabindex="-1">찾기 ></button>             </li>         </ul>         <p class="chk_motion lst_check3">             <label><input type="checkbox" name="saveId" id="saveId" value="Y" tabindex="-1"><span class="bx_chk"></span> <span>이메일 저장하기</span></label>         </p>     </div>	 </form>	 <footer class="btns center">	 	<button class="btn_pack btn_mo blue" onclick="login();">로그인</button>        <button class="btn_pack btn_mo d_gray" onclick='memberPop.addCont({url : "/member/signupStep1.af"})'>회원가입</button>	 </footer>        <script type="text/javascript">        $(document).ready(function(){            // 저장된 쿠키값을 가져와서 ID 칸에 넣어준다. 없으면 공백으로 들어감.            var userInputId = getCookie("userInputId");            $("input[name='user_id']").val(userInputId);            if($("input[name='user_id']").val() != ""){ // 그 전에 ID를 저장해서 처음 페이지 로딩 시, 입력 칸에 저장된 ID가 표시된 상태라면,                $("#saveId").attr("checked", true); // ID 저장하기를 체크 상태로 두기.            }            $("#saveId").change(function(){ // 체크박스에 변화가 있다면,                if($("#saveId").is(":checked")){ // ID 저장하기 체크했을 때,                    var userInputId = $("input[name='user_id']").val();                    setCookie("userInputId", userInputId, 7); // 7일 동안 쿠키 보관                }else{ // ID 저장하기 체크 해제 시,                    deleteCookie("userInputId");                }            });            // ID 저장하기를 체크한 상태에서 ID를 입력하는 경우, 이럴 때도 쿠키 저장.            $("input[name='user_id']").keyup(function(){ // ID 입력 칸에 ID를 입력할 때,                if($("#saveId").is(":checked")){ // ID 저장하기를 체크한 상태라면,                    var userInputId = $("input[name='user_id']").val();                    setCookie("userInputId", userInputId, 7); // 7일 동안 쿠키 보관                }            });        });        setChkAndRadio();        placeHFn.align();        $( "#user_pwd" ).keypress(function(e) {            if (e.which == 13) {                login();            }        });   	    function login(){    	    	var id = $('#user_id').val();   	    	   	    	if(valCheck(id)){		   	    	var formData = $("#loginForm").serialize();			    	$.ajax({				   		async: false				   		,type: "post"				   		,url : '/member/loginproccess.af'				   		,data : formData				   		,dataType : "html"				   		,success: function(obj){	                        //alert(obj);	                        //console.log(obj);	                        if(obj.indexOf("3MONTH") != -1) {	                        	var result = jQuery.parseJSON(obj);	                        	memberPop.addCont({url : "/member/threeMonthsReset.af", data: {width :850, point : result.point, id : result.id, uid : result.uid }});	                        }else if(obj.indexOf("INACTIVITY") != -1){	                        	var result = jQuery.parseJSON(obj);	                        	alert(result.message);	                        	memberFn.inactivityMemberCer({data : {num : result.num}});	                        }else{	                        	$('#pop_member_login_signup .btn_close').trigger('click');		                        setTimeout(function() {		                            $("#bx_login").append(obj);		                        }, 500);	                        }		                        //String url ="memberFn.inactivityMemberCer({data : {num : '"+inactMemInfo.get("MEM_UID")+"'}})";				   		}				   		,error: function(xhr, option, error){				   			alert("에러가 발생했습니다. 잠시 후에 다시하세요.");				   		}			   		});	   	    	}	    };	   function valCheck(id){		   if($.trim($("#user_id").val()) == "" || $("#user_id").val() == null){			   alert('사용자 이메일을 입력해 주세요.');			   $("#user_id").focus();			   return false;		   } else {			   /* 아이디가 이메일 형식이 아닐떄 false */			   var regex=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/;			   if(!regex.test(id)){	               alert("잘못된 이메일 형식입니다.");	               return false;	           }		   }		   		   if($.trim($("#user_pwd").val()) == "" || $("#user_pwd").val() == null){			   alert('사용자 패스워드를 입력해 주세요.');			   $("#user_pwd").focus();			   return false;		   }		   return true;	   };        </script></section>