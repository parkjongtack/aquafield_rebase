<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%><%@ include file="../../common/taglibs.jsp" %><script type="text/javascript">	$( document ).ready(function() {		// msg		if("${msg}" != ""){			alert("${msg}");		}				$(".price").each(function(){			$(this).text($(this).text().replace(/\B(?=(\d{3})+(?!\d))/g, ","));		});	});	//검색	function doSearch(){		if(!dateValidation("srch_reg_s")) return false;		if(!dateValidation("srch_reg_e")) return false;		if(!dateToDate("srch_reg_s", "srch_reg_e")) return false;		document.serach_form.submit();	};			//페이징	function doPaging(num){		$("input[name='page']").val(num);		doSearch();	};		//고개문의 탭	function goMemberCS(){		var frm = document.serach_form;		frm.action = "/secu_admaf/admin/member/member_cs_list.af";		frm.submit();	}		//회원정보 상세보기 탭 클릭	function goMemberInfo(){		var frm = document.serach_form;		frm.action = "/secu_admaf/admin/member/member_info.af";		frm.submit();	}		//상세 이동	function goDetail(idx){		$("#resLinkIdx").val(idx);		document.serach_form.action = "/secu_admaf/admin/reservation/res_edit.af";		document.serach_form.submit();	}		// 목록버튼  	function goListPage(){		document.serach_form.action = "/secu_admaf/admin/member/index.af";		document.serach_form.submit();	}	</script>
<section id="contents">	<div class="contents_bx_type1">		<div class="contents_bx_inner">			<div id="path" class="fixed">				<div class="pathInner">					<h2>회원정보</h2>					<div class="btns_area">						<a href="javascript:;" onclick="goListPage(); return false;" class="btn_pack btn_mo gray"><img src="/admaf/images/common/ico_list.png">목록</a>					</div>				</div>			</div>			<div class="tabMenu">	 			<ul class="clearfix">	 				<li><a href="#" onclick="goMemberInfo(); return false;">회원정보</a></li>	 				<li class="on"><a href="javascript:void(0);">예약내역</a></li>	 				<li><a href="#" onclick="goMemberCS(); return false;">고객문의</a></li>	 			</ul>	 		</div>	 		<form name="serach_form" action="/secu_admaf/admin/member/member_res.af" method="post" onsubmit="doSearch();return false;">				<input type="hidden" name="page" value="${resultParam.page }">				<input type="hidden" name="mem_uid" value="${resultParam.mem_uid }">				<div class="tb_type2 tabContent">					<h3>조건검색</h3>					<table style="margin-bottom: 10px;">						<tbody>							<th>예약정보 바로보기</th>							<td>								<input type="text" name="reserve_uid" id="resLinkIdx" value="${resultParam.reserve_uid }" class="ipt2 w270" onkeydown="return onlyNumber(event);" onkeyup="removeChar(event);" style='ime-mode:disabled;'/>								<button class="btn_pack btn_mo d_gray" onclick="resLink()">확인</button>							</td>						</tbody>					</table>					<table>						<tbody>							<tr>								<th>카테고리</th>								<td colspan="3">									<div class="lst_check radio">										<span class="on">											<label <c:if test="${empty resultParam.category || resultParam.category eq '' }">class="on"</c:if>>												전체<input type="radio" name="category" id="" value="" onclick="checkradio(this);" <c:if test="${empty resultParam.category || resultParam.category eq '' }">checked=""</c:if>>											</label>										</span>										<span <c:if test="${not empty resultParam.category && resultParam.category eq '입장상품' }">class="on"</c:if>>											<label>												입장상품<input type="radio" name="category" id="" value="입장상품" onclick="checkradio(this);" <c:if test="${not empty resultParam.category && resultParam.category eq '입장상품' }">checked=""</c:if>>											</label>										</span>										<span <c:if test="${not empty resultParam.category && resultParam.category eq '패키지' }">class="on"</c:if>>											<label>												패키지<input type="radio" name="category" id="" value="패키지" onclick="checkradio(this);" <c:if test="${not empty resultParam.category && resultParam.category eq '패키지' }">checked=""</c:if>>											</label>										</span>									</div>								</td>							</tr>							<tr>								<th>상태</th>								<td>									<select name="reserve_state" id="reserve_state" class="customized-select">										<option value="" >전체</option>										<c:forEach items="${codeRSRVT_TYPE }" var="code" >											<option value="${code.CODE_ID }" <c:if test="${resultParam.reserve_state == code.CODE_ID }">selected="selected"</c:if> >${code.CODE_NM }</option>										</c:forEach>									</select>								</td>								<th>방문일</th>								<td><input type="text" name="srch_reg_s" value="${resultParam.srch_reg_s }" class="ipt2 datepicker"/> 									~ <input type="text" name="srch_reg_e" value="${resultParam.srch_reg_e }" class="ipt2 datepicker"/></td>							</tr>							<tr>								<th colspan="4">									<div class="tb_btn_area center">										<button class="btn_pack btn_mo d_gray">Search</button>									</div>								</th>							</tr>						</tbody>					</table>				</div>			</form>			<div class="tb_type1">				<h3>검색결과</h3>				<div class="result_summary">Total : <strong>${totalCount }</strong></div>				<table>				 	<thead>				 		<tr>							<th width="20%">예약번호</th>							<th width="20%">선택상품</th>							<!-- <th width="25%">대여상품</th> -->							<th width="10%">총</th>							<th width="15%">방문일</th>							<th width="15%">결제금액</th>							<th width="10%">상	태</th>						</tr>				 	</thead>					<tbody>						<c:forEach var="vo" items="${rList }" varStatus="num" >							<tr>								<td>									<a href="javascript:void(0);" class="link" onclick="showResPanel('${vo.ORDER_NUM}')">										${vo.ORDER_NUM}									</a>								</td>								<td class="left">${vo.ORDER_NM}</td>								<%-- <td class="left">									<c:if test="${not empty vo.RENTAL1_ITEM_NM}">										${vo.RENTAL1_ITEM_NM }(${vo.RENTAL1_CNT })									</c:if>									<c:if test="${not empty vo.RENTAL1_ITEM_NM && 													(not empty vo.RENTAL2_ITEM_NM || not empty vo.RENTAL3_ITEM_NM ) }" >, </c:if>									<c:if test="${not empty vo.RENTAL2_ITEM_NM}">										${vo.RENTAL2_ITEM_NM }(${vo.RENTAL2_CNT })									</c:if>									<c:if test="${not empty vo.RENTAL2_ITEM_NM && not empty vo.RENTAL3_ITEM_NM  }" >, </c:if>									<c:if test="${not empty vo.RENTAL3_ITEM_NM}">										${vo.RENTAL3_ITEM_NM }(${vo.RENTAL3_CNT })									</c:if>								</td> --%>								<td>${vo.TOTNUM } 명</td>								<td>${vo.RESERVE_DATE }</td>								<td class="price">${vo.PAYMENT_PRICE} 원</td>								<c:choose>									<c:when test="${vo.RESERVE_STATE eq 'ING' }">										<c:set var="color" value="res" />									</c:when>									<c:when test="${vo.RESERVE_STATE eq 'USE' || vo.RESERVE_STATE eq 'NOUSE' }">										<c:set var="color" value="" />									</c:when>									<c:otherwise>										<c:set var="color" value="cancel" />									</c:otherwise>								</c:choose>								<td class="stat ${color }">${vo.RESERVE_STATE_NM }</td>							</tr>						</c:forEach>						<c:if test="${empty rList }">							<tr>								<td colspan="7">조회된 예약 내역이 없습니다.</td>							</tr>						</c:if>					</tbody>				</table>			</div>			<div class="paginate">				<c:if test="${pu.blockStartNum > 1 }">					<a href="javascript:;" onclick="doPaging('${pu.blockStartNum - 1 }');" class="btn prev disable">PREV</a>				</c:if>				<c:forEach var="i" begin="${pu.blockStartNum}" end="${pu.blockEndNum }">					<a href="javascript:;" onclick="doPaging('${i}');" class="num <c:if test="${i == pu.pageNum }">on</c:if>">${i}</a>				</c:forEach>				<c:if test="${pu.blockEndNum < pu.pageTotalCount }">					<a href="javascript:;" onclick="doPaging('${pu.blockEndNum + 1 }');" class="btn next">NEXT</a>				</c:if>			</div>		</div>	</div></section><script type="text/javascript">//예약정보 바로가기는 엔터키 따로 동작하게 처리$("#resLinkIdx").keydown(function (key) {    if(key.keyCode == 13){    	resLink();    	return false;    }});//예약정보 바로보기 팝업function showResPanel(resIdx){	$("#resLinkIdx").focusout();	ajaxShowPopCont({		url : "/secu_admaf/admin/member/ajax_res_view.af",		data : { reserve_uid : resIdx}	});}//null 체크function resLink() {	var result = $("#resLinkIdx").val();	if(result != ''){		showResPanel(result);	}else{		alert("예약정보를 입력해주세요.");	}}</script>