<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%><%@ include file="../../common/taglibs.jsp" %><script type="text/javascript"><!--	$( document ).ready(function() {		// order 색추가		if($("input[name='order_res']").val() == "D") $(".sort_up").css("border-bottom", "5px solid #ff0000"); 		if($("input[name='order_res']").val() == "A") $(".sort_down").css("border-top", "5px solid #ff0000");				// msg		if("${msg}" != ""){			alert("${msg}");		}	});		//검색	function doSearch(type){		if(!dateValidation("srch_reg_s")) return false;		if(!dateValidation("srch_reg_e")) return false;		if(!dateToDate("srch_reg_s", "srch_reg_e")) return false;		if(type == "search" || type == "order"){			$("input[name='page']").val("1");			}		document.serach_form.submit();	}; 	 	//페이징 	function doPaging(num){ 		$("input[name='page']").val(num); 		doSearch("paging"); 	}; 	 	// order 추가 	function plusOrder(order){ 		var $input = $("input[name='order_res']"); 		if($input.val() != "" && $input.val() == order){ 			$input.val(""); 		}else{ 			$input.val(order);	 		} 		doSearch("order"); 	}; 	 	// 상세 페이지 이동 	function doDetail(uid){ 		var frm = document.serach_form; 		$("input[name='mem_uid']").val(uid); 		frm.action = "/secu_admaf/admin/member/member_info.af"; 		frm.submit(); 	}; 	 	//-- 엑셀  다운로드//  	function excelDown(){//  		location.href='/excel/member/excelDownload.af?'+$(document.serach_form).serialize();//  	}	 //--> </script><section id="contents">	<div class="contents_bx_type1">		<div class="contents_bx_inner">			<div id="path" class="fixed">				<div class="pathInner">					<h2>회원정보</h2>				</div>			</div>			<!-- 검색 form -->			<form name="serach_form" action="/secu_admaf/admin/member/index.af" method="post" onsubmit="return false;">				<input type="hidden" name="order_res" value="${resultParam.order_res }">				<input type="hidden" name="page" value="${resultParam.page }">				<input type="hidden" name="mem_uid" value="">								<div class="tb_type2">					<h3>조건검색</h3>					<table>						<tbody>							<tr>								<th>회원정보</th>								<td>									<select name="srch_type" id="srch_type" class="customized-select">										<option value="MEM_NUM" <c:if test="${resultParam.srch_type == 'MEM_NUM' }">selected="selected"</c:if>>회원번호</option>										<option value="MEM_NM" <c:if test="${resultParam.srch_type == 'MEM_NM' }">selected="selected"</c:if>>회원명</option>										<option value="MEM_ID" <c:if test="${resultParam.srch_type == 'MEM_ID' }">selected="selected"</c:if>>ID</option>										<option value="MOBILE_NUM" <c:if test="${resultParam.srch_type == 'MOBILE_NUM' }">selected="selected"</c:if>>휴대폰번호</option>										<option value="HOME_ADDR1" <c:if test="${resultParam.srch_type == 'HOME_ADDR1' }">selected="selected"</c:if>>지역</option>									</select>											<input type="text" name="srch_text" class="ipt2" style="width:72.9%" value="${resultParam.srch_text }" onkeydown="javascript:if(event.keyCode==13){doSearch('search');}" />								</td>								<th>성	별</th>								<td>									<select name="srch_sex" id="srch_sex" class="customized-select">										<option value="" >선택</option>										<c:forEach items="${sexList }" var="vo">											<option value="${vo.CODE_ID }" <c:if test="${resultParam.srch_sex == vo.CODE_ID }">selected="selected"</c:if> >${vo.CODE_NM }</option>										</c:forEach>									</select>								</td>							</tr>							<tr>								<th>가입일</th>								<td colspan="3"><input type="text" name="srch_reg_s" class="ipt2 datepicker" value="${resultParam.srch_reg_s }" maxlength="10"/>								 ~ 								 <input type="text" name="srch_reg_e" class="ipt2 datepicker" value="${resultParam.srch_reg_e }" maxlength="10"/></td>							</tr>							<tr>								<th colspan="4">									<div class="tb_btn_area center">										<button type="button" class="btn_pack btn_mo d_gray" onclick="doSearch();">Search</button><!-- 										<button type="button" class="btn_pack btn_mo blue" onclick="excelDown();">Excel</button> -->									</div>								</th>							</tr>						</tbody>					</table>				</div>			</form>				<!--// 검색 form -->			<div class="tb_type1">				<h3>검색결과</h3>				<div class="result_summary">Total : <strong>${totalCount }</strong></div>				<table>					<colgroup>						<col width="12%">						<col width="10%">						<col>						<col>						<col width="5%">						<col>						<col width="9%">						<col>						<col>						<col width="5%">					</colgroup>				 	<thead>				 		<tr>							<th>회원번호</th>							<th>회원명</th>							<th>ID</th>							<th>휴대폰번호</th>							<th>성	별</th>							<th>생년월일</th>							<th>								예약내역								<span class="btn_sort_area">									<a href="#" class="sort_up" onclick="plusOrder('D');" ></a>									<a href="#" class="sort_down" onclick="plusOrder('A');"></a>								</span>							</th>							<th>가입일</th>							<th>로그인횟수</th>							<th>보	기</th>						</tr>				 	</thead>					<tbody>						<c:forEach items="${mList }" var="vo">				 			<tr>								<td>${vo.MEM_NUM }</td>								<td>									<c:choose>										<c:when test="${MEMINFOYN eq 'Y'}">											${vo.MEM_NM }																				</c:when>										<c:otherwise>											${vo.MASK_MEM_NM }										</c:otherwise>									</c:choose>								</td>								<td class="masking_id">									<c:choose>										<c:when test="${MEMINFOYN eq 'Y'}">											${vo.MEM_ID }																				</c:when>										<c:otherwise>											${vo.MASK_MEM_ID }										</c:otherwise>									</c:choose>																</td>								<td class="masking_phone">									<c:if test="${MEMINFOYN eq 'Y'}">								    <c:choose>								    <c:when test="${fn:length(vo.MOBILE_NUM) > 10 }">								    	${fn:substring(vo.MOBILE_NUM,0,3)}-${fn:substring(vo.MOBILE_NUM,3,7)}-${fn:substring(vo.MOBILE_NUM,7,11)}								    </c:when>								    <c:otherwise>								    	${fn:substring(vo.MOBILE_NUM,0,3)}-${fn:substring(vo.MOBILE_NUM,3,6)}-${fn:substring(vo.MOBILE_NUM,6,10)}								    </c:otherwise>							    								    </c:choose>									    </c:if>								    <c:if test="${MEMINFOYN eq 'N'}">								    	${vo.MASK_MOBILE_NUM}								    </c:if>																</td>								<td>									<c:if test="${vo.MEM_GENDER == 'M'}">										남자									</c:if>									<c:if test="${vo.MEM_GENDER == 'W'}">										여자									</c:if>								</td>								<td class="masking_birth">${vo.MEM_BIRTH }</td>								<td>${vo.RESERVE_CNT }</td>								<td>${vo.INS_DATE }</td>								<td>									${vo.LOGIN_ATTEMP }									<c:if test="${vo.LOGIN_ATTEMP >= 5}">									 	<font color='red'>계정잠김</font>									</c:if>									<c:if test="${vo.LOGIN_ATTEMP < 5}">									 	<font color='blue'>계정활성화</font>									</c:if>																	</td>								<td><a href="#" onclick="doDetail('${vo.MEM_UID }');" class="link">보기</a></td>							</tr>				 		</c:forEach>				 		<c:if test="${empty mList }">				 			<tr>				 				<td colspan="9"> 조회된 내용이 없습니다. </td>				 			<tr>				 		</c:if>					</tbody>				</table>			</div>			<div class="paginate">				<c:if test="${pu.blockStartNum > 1 }">					<a href="javascript:;" onclick="doPaging('${pu.blockStartNum - 1 }');" class="btn prev">PREV</a>				</c:if>				<c:forEach var="i" begin="${pu.blockStartNum}" end="${pu.blockEndNum }">					<a href="javascript:;" onclick="doPaging('${i}');" class="num <c:if test="${i == pu.pageNum }">on</c:if>">${i}</a>				</c:forEach>				<c:if test="${pu.blockEndNum < pu.pageTotalCount }">					<a href="javascript:;" onclick="doPaging('${pu.blockEndNum + 1 }');" class="btn next">NEXT</a>				</c:if>			</div>		</div>	</div></section><script type="text/javascript">    $(window).on('load', function(){        $('.masking_id').each(function(idx,el){            var txt = $(this).text();            txt = txt.replace(/\s/gi, "");                        var answer = '';            for(let i=0;i<txt.length;i++){                if(i<=4){                    answer += txt[i];                }                else{                    answer +="*";                }            }            $(this).text(answer);        });        $('.masking_phone').each(function(idx,el){            var txt = $(this).text();            txt = txt.replace(/\s/gi, "");                        var answer = '';            for(let i=0;i<txt.length;i++){                if(i>=txt.length-4){                    answer += txt[i];                }                else{                    answer +="*";                }            }            $(this).text(answer);        });        $('.masking_birth').each(function(idx,el){            var txt = $(this).text();            txt = txt.replace(/\s/gi, "");                        var answer = '';            for(let i=0;i<txt.length;i++){                if(i>=txt.length-4){                    answer += txt[i];                }                else{                    answer +="*";                }            }            $(this).text(answer);        });    });</script>