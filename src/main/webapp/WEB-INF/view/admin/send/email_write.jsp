<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%><%@ include file="../../common/taglibs.jsp" %>
<script type="text/javascript" src="/common/editor/js/HuskyEZCreator.js" charset="utf-8"></script><form name="form" id="form" method="post" action="email_write_action.af" onsubmit="return false;"><input type="hidden" name="mode" value="updt"><input type="hidden" name="num" value="${resultParam.num}"><input type="hidden" name="email_type" value="${result.EMAIL_TYPE}">		<section id="contents">			<div class="contents_bx_type1">				<div class="contents_bx_inner">					<div id="path" class="fixed">						<div class="pathInner">							<h2>E-MAIL 발송관리</h2>							<div class="btns_area">								<button type="button" onclick="doSave();" class="btn_pack btn_mo d_gray"><img src="/admaf/images/common/ico_save.png">저장</button>								<a href="email.af" class="btn_pack btn_mo gray"><img src="/admaf/images/common/ico_list.png">목록</a>							</div>						</div>					</div>					<div class="tb_type2">						<h3>발송메일 관리</h3>						<table>							<tbody>								<tr>									<th>구	분</th>									<td>${result.EMAIL_TYPE}</td>								</tr>								<tr>									<th>발송메일</th>									<td><input type="text" name="FROM_EMAIL" class="ipt2 w270" value="${result.FROM_EMAIL}" /></td>								</tr>								<tr>									<th>발송이름</th>									<td><input type="text" name="FORM_EMAIL_NM" class="ipt2 w270" value="${result.FORM_EMAIL_NM}" /></td>								</tr>								<tr>									<th>제	목</th>									<td><input type="text" name="EMAIL_TITLE" class="ipt2 w562mx100" value="${result.EMAIL_TITLE}" /></td>								</tr>								<tr>									<td colspan="2">										<div class="bx_editer">											<textarea name="EMAIL_CONTENT" id="EMAIL_CONTENT" rows="20" cols="100" style="width:880px;">${resultContent}</textarea>										</div>									</td>								</tr>							</tbody>						</table>					</div>				</div>			</div>		</section></form><script type="text/javascript">function doSave(){	var f = document.form;	oEditors.getById["EMAIL_CONTENT"].exec("UPDATE_CONTENTS_FIELD", []);	if($.trim(f.FROM_EMAIL.value) == ""){		alert("발송메일 항목을 입력하세요.");		f.FROM_EMAIL.focus();		return;	}	if($.trim(f.FORM_EMAIL_NM.value) == ""){		alert("발송이름 항목을 입력하세요.");		f.FORM_EMAIL_NM.focus();		return;	}	if($.trim(f.EMAIL_TITLE.value) == ""){		alert("제목 항목을 입력하세요.");		f.EMAIL_TITLE.focus();		return;	}	if($.trim(f.EMAIL_CONTENT.value) == ""){		alert("내용 항목을 입력하세요.");		f.EMAIL_CONTENT.focus();		return;	}	var msg = f.mode.value == "inst" ? "등록" : "수정";	if(confirm(msg + " 하시겠습니까?")){		$.ajax({			 type: "post"			,url : "email_write_action.af"			,data : $(document.form).serialize().replace(/%/g,'%25')			,dataType : "json"			,success: function(data){				if(data.result == true){					alert(data.msg);					top.location.href="email.af";				}				else{					alert(data.msg);				}			}			,error: function(xhr, option, error){				alert("오류가 있습니다. 잠시후에 다시하세요");			}		});	}}	placeHFn.align();</script><script type="text/javascript">var oEditors = [];// 추가 글꼴 목록//var aAdditionalFontSet = [["MS UI Gothic", "MS UI Gothic"], ["Comic Sans MS", "Comic Sans MS"],["TEST","TEST"]];$(function(){	nhn.husky.EZCreator.createInIFrame({		oAppRef: oEditors,		elPlaceHolder: "EMAIL_CONTENT",		sSkinURI: "/common/editor/SmartEditor2Skin.jsp",		htParams : {						bUseToolbar : true,				// 툴바 사용 여부 (true:사용/ false:사용하지 않음)			bUseVerticalResizer : true,		// 입력창 크기 조절바 사용 여부 (true:사용/ false:사용하지 않음)			bUseModeChanger : true,			// 모드 탭(Editor | HTML | TEXT) 사용 여부 (true:사용/ false:사용하지 않음)			//aAdditionalFontList : aAdditionalFontSet,		// 추가 글꼴 목록			fOnBeforeUnload : function(){				//alert("완료!");			}		}, //boolean		fOnAppLoad : function(){			//예제 코드			//oEditors.getById["EMAIL_CONTENT"].exec("PASTE_HTML", ["로딩이 완료된 후에 본문에 삽입되는 text입니다."]);			 //$("#content").find("iframe").css("width", "488px");			 			 $("#smart_editor2", parent.frames[0].document).css("width", "100%");			 oEditors.registerPlugin(new nhn.husky.SE_WYSIWYGEnterKey("BR")); 			 		},		fCreator: "createSEditor2"	});})function pasteHTML(sHTML) {	//var sHTML = "<span style='color:#FF0000;'>이미지도 같은 방식으로 삽입합니다.<\/span>";	oEditors.getById["EMAIL_CONTENT"].exec("PASTE_HTML", [sHTML]);}function showHTML() {	return oEditors.getById["EMAIL_CONTENT"].getIR();}	function submitContents(elClickedObj) {	oEditors.getById["EMAIL_CONTENT"].exec("UPDATE_CONTENTS_FIELD", []);	// 에디터의 내용이 textarea에 적용됩니다.		// 에디터의 내용에 대한 값 검증은 이곳에서 document.getElementById("EMAIL_CONTENT").value를 이용해서 처리하면 됩니다.		try {		elClickedObj.form.submit();	} catch(e) {}}function setDefaultFont() {	var sDefaultFont = '돋움';	var nFontSize = 9;	oEditors.getById["EMAIL_CONTENT"].setDefaultFont(sDefaultFont, nFontSize);}</script>	