<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%><%@ include file="../../common/taglibs.jsp" %><script type="text/javascript" src="/common/editor/js/HuskyEZCreator.js" charset="utf-8"></script>
<section id="contents">	<div class="contents_bx_type1">		<div class="contents_bx_inner">			<div id="path" class="fixed">				<div class="pathInner">					<h2>약관관리</h2>					<div class="btns_area">						<button class="btn_pack btn_mo d_gray" onclick="doSave();"><img src="/admaf/images/common/ico_save.png">저장</button>						<a href="#list" class="btn_pack btn_mo gray" onclick="goList(); return false;"><img src="/admaf/images/common/ico_list.png">목록</a>						<a href="#" class="btn_pack btn_mo gray" id="delInfo"><img src="/admaf/images/common/ico_del.png">삭제</a>					</div>				</div>			</div>			<form name="form" id="form" method="post" action="terms_write_action.af" onsubmit="return false;">			<c:choose>				<c:when test="${empty result}"><input type="hidden" name="mode" id="mode" value="inst"></c:when>				<c:otherwise><input type="hidden" name="mode" id="mode" value="updt"></c:otherwise>			</c:choose>			<input type="hidden" name="num" id="num" value="${resultParam.num}">			<input type="hidden" name="page" id="page" value="${resultParam.page}">			<input type="hidden" name="tt" id="tt" value="${resultParam.tt}">			<input type="hidden" name="TERMS_TYPE" id="TERMS_TYPE" value="${resultParam.tt}">				<div class="tb_type2">					<h3>약관정보</h3>					<table>						<tbody>							<tr>								<th>구분</th>								<td>										<c:forEach items="${resultsType}" var="resultSub">											<c:if test="${resultParam.tt eq resultSub.CODE_ID}">${resultSub.CODE_NM}</c:if>										</c:forEach>								</td>							</tr>							<tr>								<th>제	목</th>								<td><input type="text" name="TERMS_TITLE" class="ipt2 w562mx100" value="${result.TERMS_TITLE}" /></td>							</tr>							<tr>								<td colspan="2">									<div class="bx_editer">										<textarea name="TERMS_CONTENT" id="TERMS_CONTENT" rows="20" cols="100" style="width:880px;">${resultContent}</textarea>									</div>								</td>							</tr>						</tbody>					</table>				</div>			</form>		</div>	</div></section><script type="text/javascript">function goList(){	var thisForm				= document.form;	thisForm.action="/secu_admaf/admin/homepage/index.af";	thisForm.submit();}function doSave(){	var f = document.form;	oEditors.getById["TERMS_CONTENT"].exec("UPDATE_CONTENTS_FIELD", []);	if($.trim(f.TERMS_TITLE.value) == ""){		alert("제목 항목을 입력하세요.");		f.TERMS_TITLE.focus();		return;	}	if($.trim(f.TERMS_CONTENT.value) == ""){		alert("내용 항목을 입력하세요.");		f.TERMS_CONTENT.focus();		return;	}	var msg = f.mode.value == "inst" ? "등록" : "수정";	if(confirm(msg + " 하시겠습니까?")){		$.ajax({			 type: "post"			,url : "terms_write_action.af"			,data : $(document.form).serialize().replace(/%/g,'%25')			,dataType : "json"			,success: function(data){				if(data.result == true){					alert(data.msg);					goList();				}				else{					alert(data.msg);				}			}			,error: function(xhr, option, error){				alert("오류가 있습니다. 잠시후에 다시하세요");			}		});	}};placeHFn.align();var oEditors = [];//추가 글꼴 목록//var aAdditionalFontSet = [["MS UI Gothic", "MS UI Gothic"], ["Comic Sans MS", "Comic Sans MS"],["TEST","TEST"]];$(function(){	nhn.husky.EZCreator.createInIFrame({		oAppRef: oEditors,		elPlaceHolder: "TERMS_CONTENT",		sSkinURI: "/common/editor/SmartEditor2Skin.jsp",		htParams : {						bUseToolbar : true,				// 툴바 사용 여부 (true:사용/ false:사용하지 않음)			bUseVerticalResizer : true,		// 입력창 크기 조절바 사용 여부 (true:사용/ false:사용하지 않음)			bUseModeChanger : true,			// 모드 탭(Editor | HTML | TEXT) 사용 여부 (true:사용/ false:사용하지 않음)			//aAdditionalFontList : aAdditionalFontSet,		// 추가 글꼴 목록			fOnBeforeUnload : function(){				//alert("완료!");			}		}, //boolean		fOnAppLoad : function(){			//예제 코드			//oEditors.getById["EMAIL_CONTENT"].exec("PASTE_HTML", ["로딩이 완료된 후에 본문에 삽입되는 text입니다."]);			 //$("#content").find("iframe").css("width", "488px");			 			 $("#smart_editor2", parent.frames[0].document).css("width", "100%");			 oEditors.registerPlugin(new nhn.husky.SE_WYSIWYGEnterKey("BR")); 			 		},		fCreator: "createSEditor2"	});})function pasteHTML(sHTML) {	//var sHTML = "<span style='color:#FF0000;'>이미지도 같은 방식으로 삽입합니다.<\/span>";	oEditors.getById["TERMS_CONTENT"].exec("PASTE_HTML", [sHTML]);}function showHTML() {	return oEditors.getById["TERMS_CONTENT"].getIR();}	function submitContents(elClickedObj) {	oEditors.getById["TERMS_CONTENT"].exec("UPDATE_CONTENTS_FIELD", []);	// 에디터의 내용이 textarea에 적용됩니다.		// 에디터의 내용에 대한 값 검증은 이곳에서 document.getElementById("EMAIL_CONTENT").value를 이용해서 처리하면 됩니다.		try {		elClickedObj.form.submit();	} catch(e) {}}function setDefaultFont() {	var sDefaultFont = '돋움';	var nFontSize = 9;	oEditors.getById["TERMS_CONTENT"].setDefaultFont(sDefaultFont, nFontSize);}</script><script type="text/javascript">	$("#delInfo").on("click",function(e) {		e.preventDefault()		if(confirm("정말 삭제하시겠습니까? 되돌릴수 없습니다.")) {			$.ajax({				 type: "post"				,url : "terms_delete_action.af"				,data : {num : "${resultParam.num}", tt : "${resultParam.tt}", title : "${result.TERMS_TITLE}"}				,dataType : "json"				,success: function(data){					if(data.result == true){						alert(data.msg);						goList();					}					else{						alert(data.msg);					}				}				,error: function(xhr, option, error){					alert("오류가 있습니다. 잠시후에 다시하세요");				}			});		}	});</script>